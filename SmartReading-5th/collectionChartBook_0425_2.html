<!doctype html>
<html lang="zh-tw">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="SmartReading 適性閱讀">
    <meta name="author" content="SmartReading 適性閱讀">
    <title>SmartReading 適性閱讀</title>
    <link rel="shortcut icon" type="image/x-icon" href="../Content/images/SR.ico">

    <!-- this page widgets CSS -->
    <!-- Swiper 開始 -->
    <link rel="stylesheet" href="Content/css/swiper-bundle-11.0.7.min.css" />
    <!-- Swiper 結束 -->

    <!-- datatables 開始 -->
    <link rel="stylesheet" type="text/css" href="Content/widgets/DataTables/datatables.min.css">
    <!-- datatables 結束 -->


    <link rel="stylesheet" type="text/css" href="Content/css/SR-collectionBook.css" />
</head>

<body>
    <!-- ------- ------- ------- ------- ------- ------- ------- -->
    <main class="main collectionBook">

        <!-- collectionBook start -->


        <div class="collectionBook_area ">
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">

                    <!-- 第一頁 封面 -->
                    <div id="abc" class="swiper-slide page">
                        <div class="collectionBook_content">
                            <div class="cover_area">
                                <div class="cover_decoration">
                                    <img src="Content/images/collectionChartBook/cover_decoration.png" alt="">
                                </div>
                                <div class="cover_top">
                                    <div class="cover_top_logo">
                                        <img src="Content/images/logo-SR.png" alt="">
                                    </div>
                                    <div class="cover_top_text">
                                        <h4>
                                            閱讀歷程收集冊
                                        </h4>
                                    </div>
                                </div>
                                <div class="cover_center">
                                    <p>姓名：</p>
                                    <p>學校：</p>
                                    <p>年級：</p>
                                    <p>活動日期：</p>
                                </div>
                                <div class="cover_bottom">
                                    <p>主辦單位：</p>
                                    <p>協辦單位：</p>
                                    <p>贊助單位：</p>
                                </div>
                            </div>
                            <!-- 轉PDF用的copyright_area -->
                            <div class="copyright_area">
                                <img src="Content/images/logo-SR.png" alt="">
                                <p>
                                    版權所有 ‧ 翻印必究
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="swiper-slide page">
                        <div class="collectionBook_content calendar_content">

                            <div id="img-out"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="swiper_btn_arrow swiper_btn_next"></div>
            <div class="swiper_btn_arrow swiper_btn_prev"></div>

            <div class="copyright_area">
                <img src="Content/images/logo-SR.png" alt="">
                <p>
                    版權所有 ‧ 翻印必究
                </p>
            </div>

            <div class="swiper_wrapper_pagination">
                <div class="swiper-pagination"></div>
            </div>

            <a href="" class="downloadPDF_area" download="">
                <div class="download_icon">
                    <i class="fa-solid fa-download"></i>
                </div>
                <p>下載PDF</p>
            </a>
        </div>
    </main>

    <!-- ------- ------- ------- ------- ------- ------- ------- -->
    <!-- ------- ------- ------- ------- ------- ------- ------- -->
    <!-- ------- ------- ------- ------- ------- ------- ------- -->
    <script src="Script/jquery.min.js"></script>
    <script src="Script/bootstrap-lg.min.js"></script>
    <script src="Script/ie10-viewport-bug-workaround.js"></script>
    <script src="Content/widgets/fontawesome-free-6.1.1-web/fontawesome-free-6.1.1.min.js"></script>
    <!-- widgets js -->
    <script src="Content/widgets/DataTables/datatables.min.js"></script>

    <!-- Swiper JS -->
    <script src="Content/js/swiper-bundle-11.0.7.min.js"></script>

    <!-- Chart JS -->
    <script src="Content/js/chart.min.js"></script>

    <!-- datepicker月曆 -->
    <script src='Content/js/moment-2.22.2.js'></script>
    <script src='Content/js/fullcalendar-3.9.0.min.js'></script>
    <script src='Content/js/datepicker-2.2.3.js'></script>

    <!-- html2canvas -->
    <script src="Content/js/html2canvas-1.4.1.min.js"></script>

    <!-- Swiper -->
    <script>
        var swiper = new Swiper(".mySwiper", {
            allowTouchMove: false,
            autoHeight: true,

            navigation: {
                nextEl: ".swiper_btn_next",
                prevEl: ".swiper_btn_prev",
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
                renderBullet: function (index, className) {
                    return '<span class="' + className + '">' + (index + 1) + "</span>";
                },
            },
            mousewheel: false,
            keyboard: true,
        });
    </script>

    <!-- datepicker -->
    <script>
        $(document).ready(function () {
            $('.datetimepicker').datepicker({
                timepicker: true,
                language: 'en',
                range: true,
                multipleDates: true,
                multipleDatesSeparator: " - "
            });

            $('#calendar').fullCalendar({
                themeSystem: 'bootstrap4',
                // emphasizes business hours
                businessHours: false,
                defaultView: 'month',
                // event dragging & resizing
                editable: true,
                // header
                header: {
                    left: 'title',
                    center: 'month,agendaWeek,agendaDay',
                    right: 'today prev,next'
                },
                events: [

                ],
                eventRender: function (event, element) {
                    if (event.icon) {
                        element.find(".fc-title").prepend("<i class='fa fa-" + event.icon +
                            "'></i>");
                    }
                },
            });
        });
    </script>

    <!-- Chart -->
    <script>
        Chart.Tooltip.positioners.custom = function (elements, position) {
            return {
                x: elements[0]._model.x,
                y: 30
            }
        }

        var ctx11 = document.getElementById('anisotropic-pr-value').getContext('2d');
        var myChart = new Chart(ctx11, {
            type: "line",
            data: {
                labels: [
                    "",
                    "1月",
                    "2月",
                    "3月",
                    "4月",
                    "5月",
                    "6月",
                    "7月",
                    "8月",
                    "9月",
                    "10月",
                    "11月",
                    "12月",
                ],
                datasets: [{
                    backgroundColor: "#446ef6",
                    borderColor: "#446ef6",
                    fill: false,
                    data: [, 15, 25, 30, 22, 20, 24, 26, 27, 23],
                    pointRadius: 6,
                    pointHoverRadius: 6,
                    tension: 0.5
                }, ],
            },
            options: {
                responsive: true,
                animation: {
                    duration: 0,
                },
                tooltips: {
                    // Disable the on-canvas tooltip
                    enabled: true,
                    yAlign: 'none',
                    position: 'custom',
                },
                legend: {
                    display: false
                },
                scales: {
                    xAxes: [{
                        position: 'bottom',
                        ticks: {
                            fontColor: '#595757',
                            fontSize: 17,
                            fontStyle: "bold",
                        }
                    }],
                    yAxes: [{
                        position: 'left',
                        ticks: {
                            min: 0,
                            stepSize: 5,
                            fontColor: '#595757',
                            fontSize: 17,
                            fontStyle: "bold",
                        }
                    }]
                },
            },

            plugins: [{
                afterDraw: function (chartInstance) {
                    ctx = chartInstance.ctx;
                    ctx.textAlign = "center";
                    ctx.textBaseline = "middle";
                    ctx.fillStyle = '#000';
                    ctx.font = "bold 14px 'Arial'";
                    chartInstance.data.datasets.forEach(function (dataset, i) {
                        var meta = chartInstance.controller.getDatasetMeta(i);
                        if (i == 0) {
                            meta.data.forEach(function (bar, index) {
                                var data = dataset.data[index];
                                ctx.fillText(data, bar._model.x, bar._model.y +
                                    20); //bar數值y軸-10
                            });
                        }
                    });
                }
            }],
        });
    </script>

    <!-- 學年選擇 -->
    <script>
        $(".level_introduction_btn button").click(function () {
            $(this).toggleClass("open");
        });

        var dropdown_item_one = $(".dropdown_item_li_one").text();
        var dropdown_item_two = $(".dropdown_item_li_two").text();
        var dropdown_item_three = $(".dropdown_item_li_three").text();

        $(".dropdown_item_li").click(function () {
            $(".level_introduction_btn button").toggleClass("open");
        });

        $(".dropdown_item_li_one").click(function () {
            document.getElementById('searchBtn_text').innerHTML = dropdown_item_one;
            $(".dropdown_item_li").removeClass("active");
            $(this).addClass("active");
        });
        $(".dropdown_item_li_two").click(function () {
            document.getElementById('searchBtn_text').innerHTML = dropdown_item_two;
            $(".dropdown_item_li").removeClass("active");
            $(this).addClass("active");
        });
        $(".dropdown_item_li_three").click(function () {
            document.getElementById('searchBtn_text').innerHTML = dropdown_item_three;
            $(".dropdown_item_li").removeClass("active");
            $(this).addClass("active");
        });
    </script>

    <!-- datatables 開始 -->
    <script>
        $(document).ready(function () {
            //datatables (demo，正式需工程師改寫~~)
            // 推薦書單閱讀明細
            var booklistTable = $('#booklistTable').DataTable({
                responsive: true,
                pageLength: 25,
                pagingType: "simple_numbers",

                dom: '<""<""t>>' +
                    '<"booklist_table_footer"pi>',

                buttons: [],

                language: {
                    "processing": "處理中...",
                    "loadingRecords": "載入中...",
                    "lengthMenu": "顯示 _MENU_ 項結果",
                    "zeroRecords": "沒有符合的結果",
                    "info": "<span class='footer-hide'>共&nbsp;_TOTAL_&nbsp;篇&nbsp;&nbsp;&nbsp;&nbsp;</span><strong class='color_red'>&nbsp;_PAGE_&nbsp;</strong><span class='footer-hide'>&nbsp;/&nbsp;</span>&nbsp;_PAGES_&nbsp;",
                    "infoEmpty": "<span class='footer-hide'>共&nbsp;0&nbsp;本書&nbsp;&nbsp;&nbsp;&nbsp;</span><strong>&nbsp;0&nbsp;</strong><span class='footer-hide'>&nbsp;/&nbsp;</span>&nbsp;0&nbsp;",
                    "infoFiltered": "(從 _MAX_ 本書中篩選的結果)",
                    "infoPostFix": "",
                    "search": "搜尋：",
                    "paginate": {
                        "first": "第一頁",
                        "previous": "<i class='fa fa-angle-left' aria-hidden='true'></i>",
                        "next": "<i class='fa fa-angle-right' aria-hidden='true'></i>",
                        "last": "最後一頁"
                    },
                    // "aria": {
                    //     "sortAscending": ": 升冪排列",
                    //     "sortDescending": ": 降冪排列"
                    // }
                },
            });

            // 推薦文章閱讀明細
            var articleTable = $('#articleTable').DataTable({
                responsive: true,
                searching: true,
                select: true,
                pageLength: 25,
                pagingType: "simple_numbers",
                columnDefs: [{
                        "targets": 0,
                        orderable: false
                    },
                    {
                        "targets": 1,
                        orderable: false
                    },
                    {
                        "targets": 2,
                        orderable: false
                    },
                    {
                        "targets": 3,
                        orderable: false
                    },
                    {
                        "targets": 4,
                        orderable: false
                    },
                ],

                dom: '<""<""t>>' +
                    '<"booklist_table_footer"pi>',

                buttons: [],

                language: {
                    "processing": "處理中...",
                    "loadingRecords": "載入中...",
                    "lengthMenu": "顯示 _MENU_ 項結果",
                    "zeroRecords": "沒有符合的結果",
                    "info": "<span class='footer-hide'>共&nbsp;_TOTAL_&nbsp;篇&nbsp;&nbsp;&nbsp;&nbsp;</span><strong class='color_red'>&nbsp;_PAGE_&nbsp;</strong><span class='footer-hide'>&nbsp;/&nbsp;</span>&nbsp;_PAGES_&nbsp;",
                    "infoEmpty": "<span class='footer-hide'>共&nbsp;0&nbsp;本書&nbsp;&nbsp;&nbsp;&nbsp;</span><strong>&nbsp;0&nbsp;</strong><span class='footer-hide'>&nbsp;/&nbsp;</span>&nbsp;0&nbsp;",
                    "infoFiltered": "(從 _MAX_ 本書中篩選的結果)",
                    "infoPostFix": "",
                    "search": "搜尋：",
                    "paginate": {
                        "first": "第一頁",
                        "previous": "<i class='fa fa-angle-left' aria-hidden='true'></i>",
                        "next": "<i class='fa fa-angle-right' aria-hidden='true'></i>",
                        "last": "最後一頁"
                    },
                    "aria": {
                        "sortAscending": ": 升冪排列",
                        "sortDescending": ": 降冪排列"
                    }
                },
            });

            //點擊dataTable頁碼滑動至最表格上方
            $('.dataTables_paginate').click(function () {
                $('html, body').animate({
                    scrollTop: $(".collectionBook_area").offset().top
                }, 500);
            });

            //切換左右頁把datatable切換回第一頁
            $('.swiper_btn_arrow').click(function () {
                $('html, body').animate({
                    scrollTop: $(".collectionBook_area").offset().top
                }, 500);
                booklistTable.page(1).draw();
                articleTable.page(1).draw();
            });

            //點擊swiper頁碼滑動至最表格上方datatable切換回第一頁
            $('.swiper-pagination-bullet').click(function () {
                $('html, body').animate({
                    scrollTop: $(".collectionBook_area").offset().top
                }, 500);
                booklistTable.page(1).draw();
                articleTable.page(1).draw();
            });
        });
    </script>

    <script>
        $(document).ready(function () {
                html2canvas(document.querySelector("#abc")).then(canvas => {
                    $("#img-out").append(canvas);
                });
        });
    </script>
</body>

</html>