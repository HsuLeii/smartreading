<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

  <canvas id="ndvi_evi_chart" width="200" height="80"></canvas>
  <div id="canvas-as-image"></div>

  <script src="Content/js/chart2.9.3.min.js"></script>
  
  <script>
    // Source - https://stackoverflow.com/a
    // Posted by tom, modified by community. See post 'Timeline' for change history
    // Retrieved 2025-11-13, License - CC BY-SA 4.0
    var icon = '../Content/image/bookcover/RA1019PCT300.jpg';

    var ctx1 = document.getElementById('ndvi_evi_chart').getContext('2d');

    var myChart = new Chart(ctx1, {
      type: 'radar',
      data: {
        labels: ["恆毅力", "執行力", "精進力", "博學力", "成長力1"],
        datasets: [{
          label: 'Weekly Sales',
          data: [61, 166, 160, 250, 150],
          pointRadius: 7,
          pointBackgroundColor: ["#00abce", "#ee8919", "#0078bb", "#84b526", "#df007c"],
          pointBorderColor: '#fff',
          pointHoverRadius: 10,
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: ["#00abce", "#ee8919", "#0078bb", "#84b526", "#df007c"],
          icons: [icon, icon, icon, icon, icon],
        }]
      },

      options: {

        plugins: {
          datalabels: {
            color: '#20221f',
            // 位置
            anchor: 'top',
            // 水平位置
            align: 'end',
            // 文字置中
            textAlign: 'center',
            backgroundColor: ['#83caff', '#ffcf3a', '#5dc994', '#fe9795'],
            borderWidth: 1,
            borderRadius: 5,
            padding: 5,
            icons: [icon, icon, icon, icon, icon],
          },
        },

        scales: {},

        animation: {}

      },

    plugins: [{ // Defining an inline per-chart plugin
    id: 'perChartCustomDraw',
    afterDraw: function(chart) {
      const c = chart.ctx;
        const rScale = chart.scale;
        chart.data.datasets[0].data.forEach(function(item, index) {
          const point = rScale.getPointPositionForValue(0.5 + index, 100);

          const image = new Image();
          const icon = 'https://www.chartjs.org/img/chartjs-logo.svg';
            image.src = icon;
          c.drawImage(image , point.x - 0, point.y - 0,);
        });

        alert(c);
    }
  }]
    });
    </script>

</body>