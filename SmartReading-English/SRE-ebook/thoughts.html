<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRE-eBook</title>

    <!-- this page widgets CSS -->
    <!-- modal -->
    <link rel="stylesheet" href="css/jquery.modal.min.css" />


    <link rel="shortcut icon" type="image/x-icon" href="image/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="css/SREebook.css">
</head>
<header>
    <div class="book-logo">
        <img src="image/logo.png" alt="">
    </div>
    <button class="close cursor background-icon">
    </button>
</header>
<div class="book-page-one">
    <div class="course_area">
        <div class="course_name">
            <h4>
                新同學
            </h4>
        </div>
        <div class="course_img_area">
            <div class="course_img">
                <img src="image/picturebook/1.png" alt="">
            </div>
        </div>
    </div>

    <div class="dialogue_area">
        <div class="dialogue_block_area chat-history">

            <ul>
                <li class="clearfix">
                  <div class="message-data align-right">
                    <span class="message-data-time" >10:10 AM, Today</span> &nbsp; &nbsp;
                    <span class="message-data-name" >Olia</span> <i class="fa fa-circle me"></i>
                    
                  </div>
                  <div class="message other-message float-right">
                    Hi Vincent, how are you? How is the project coming along?
                  </div>
                </li>
                
                <li>
                  <div class="message-data">
                    <span class="message-data-name"><i class="fa fa-circle online"></i> Vincent</span>
                    <span class="message-data-time">10:12 AM, Today</span>
                  </div>
                  <div class="message my-message">
                    Are we meeting today? Project has been already finished and I have results to show you.
                  </div>
                </li>
                
                <li class="clearfix">
                  <div class="message-data align-right">
                    <span class="message-data-time" >10:14 AM, Today</span> &nbsp; &nbsp;
                    <span class="message-data-name" >Olia</span> <i class="fa fa-circle me"></i>
                    
                  </div>
                  <div class="message other-message float-right">
                    Well I am not sure. The rest of the team is not here yet. Maybe in an hour or so? Have you faced any problems at the last phase of the project?
                  </div>
                </li>
                
                <li>
                  <div class="message-data">
                    <span class="message-data-name"><i class="fa fa-circle online"></i> Vincent</span>
                    <span class="message-data-time">10:20 AM, Today</span>
                  </div>
                  <div class="message my-message">
                    Actually everything was fine. I'm very excited to show this to our team.
                  </div>
                </li>
                
                <li>
                  <div class="message-data">
                    <span class="message-data-name"><i class="fa fa-circle online"></i> Vincent</span>
                    <span class="message-data-time">10:31 AM, Today</span>
                  </div>
                  <i class="fa fa-circle online"></i>
                  <i class="fa fa-circle online" style="color: #AED2A6"></i>
                  <i class="fa fa-circle online" style="color:#DAE9DA"></i>
                </li>
                
              </ul>

            <div class="dialogue_block dialogue_left">
                <div class="dialogue_avatar">
                        <div class="avatar_text">
                            <h4>A</h4>
                        </div>
                </div>
    
                <div class="dialog_box">
                    <div class="dialog_box_text">
                        <p>
                            同學們給大家介紹一位外國留學生大衛
                        </p>
                    </div>
                </div>
            </div>
    
            <div class="dialogue_block dialogue_right">
                <div class="dialogue_avatar">
                    <div class="avatar_text">
                        <h4>A</h4>
                    </div>
            </div>
    
                <div class="dialog_box">
                    <div class="dialog_box_text">
                        <p>
                            大家好我叫大衛
                        </p>
                    </div>
                </div>
            </div>
    
            <div class="dialogue_block dialogue_left">
                <div class="dialogue_avatar">
                    <div class="avatar_text">
                        <h4>A</h4>
                    </div>
            </div>
    
                <div class="dialog_box">
                    <div class="dialog_box_text">
                        <p>
                            大衛第一天來學校。漢文，你能帶大衛認識學校嗎?
                        </p>
                    </div>
                </div>
            </div>
    
            <div class="dialogue_block dialogue_right">
                <div class="dialogue_avatar">
                    <div class="avatar_text">
                        <h4>A</h4>
                    </div>
                </div>
    
                <div class="dialog_box">
                    <div class="dialog_box_text">
                        <p>好。</p>
                    </div>
    
                </div>
            </div>
    
            <div class="dialogue_block dialogue_left">
                <div class="dialogue_avatar">
                    <div class="avatar_text">
                        <h4>A</h4>
                    </div>
                </div>
    
                <div class="dialog_box">
                    <div class="dialog_box_text">
                        <p>
                            謝謝你。
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="dialogue_message">
            <textarea class="dialogue_textarea" id="message-to-send" placeholder ="Type your message" rows="5"></textarea>

            <button class="dialogue_btn">Send</button>
        </div>
    </div>

    
</div>



<script src="js/jquery-3.5.1.min.js"></script>

<!-- this page widgets JS -->
<!-- modal -->
<script src="js/jquery.modal.min.js"></script>

<!-- fontawesome -->
<script src="js/fontawesome-free-6.1.1.min.js"></script>

<script src="js/all.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js"></script>

<script id="message-template" type="text/x-handlebars-template">
    <li class="clearfix">
      <div class="message-data align-right">
        <span class="message-data-time" >{{time}}, Today</span> &nbsp; &nbsp;
        <span class="message-data-name" >Olia</span> <i class="fa fa-circle me"></i>
      </div>
      <div class="message other-message float-right">
        {{messageOutput}}
      </div>
    </li>
  </script>

<script>

// $("button").click(function() {
//     var x = document.getElementById("message-to-send").value;
//     alert(x);
// });
  

    var chat = {
        messageToSend: '',
        init: function() {
          this.cacheDOM();
          this.bindEvents();
          this.render();
        },
        cacheDOM: function() {
          this.$chatHistory = $('.chat-history');
          this.$button = $('button');
          this.$textarea = $('#message-to-send');
          this.$chatHistoryList =  this.$chatHistory.find('ul');
        },
        bindEvents: function() {
        this.$button.on('click', this.addMessage.bind(this));
        },
        render: function() {
        //   this.scrollToBottom();
          if (this.messageToSend.trim() !== '') {
            // var template = document.getElementById("message-to-send").value;
            var template = Handlebars.compile( $("#message-template").html());
            var context = { 
              messageOutput: template,
            //   time: this.getCurrentTime()
            };
    
            $('.chat-history').find('ul').append(template);
            // this.scrollToBottom();
            this.$textarea.val('');
          }

          
        },
        
        addMessage: function() {
          this.messageToSend = $("#message-to-send").val();
          this.render();
        },
        // scrollToBottom: function() {
        //    this.$chatHistory.scrollTop(this.$chatHistory[0].scrollHeight);
        // },
        getCurrentTime: function() {
          return new Date().toLocaleTimeString().
                  replace(/([\d]+:[\d]{2})(:[\d]{2})(.*)/, "$1$3");
        },
        getRandomItem: function(arr) {
          return arr[Math.floor(Math.random()*arr.length)];
        }
        
      };
      
      chat.init();
    
    
    </script>




</body>

</html>